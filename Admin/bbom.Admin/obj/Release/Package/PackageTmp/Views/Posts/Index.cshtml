@*@model IEnumerable<UshakovaWebsite.Data.Model.post>

@{
    ViewBag.Title = "Все посты";
}

        <table id="table" class="display">
            <thead>
                <tr>
                    <th>№</th>
                    <th>Автор</th>
                    <th>Дата создания</th>
                    <th>Заголовок</th>
                    <th>Категории</th>
                </tr>
            </thead>
        </table>


@section Scripts{
    <script>
        $(function () {
            $.ajax({
                type: "GET",
                url: "@Url.Action("GetPosts", "Posts")",
                success: function (json) {
                    $('#table').DataTable({
                        pageLength: 16,
                        data: json,
                        dom: 'Bfrtip',
                        select: true,
                        buttons: [
                            {
                                //extend: 'createHtml5',
                                text: '<i class="fa fa-plus"></i>',
                                titleAttr: 'Создать',
                                action: function () {
                                    document.location = '@Url.Action("Create")';
                                }
                            },
                            {
                                //extend: 'editHtml5',
                                text: '<i class="fa fa-pencil-square-o"></i>',
                                titleAttr: 'Изменить',
                                action: function () {
                                    var id = $('#table').DataTable().rows({ selected: true }).data()[0][0];
                                    if (id != undefined)
                                        document.location = '@Url.Action("Edit")' + "/" + id;
                                }
                            },
                            {
                                //extend: 'detailsHtml5',
                                text: '<i class="fa fa-file-text-o"></i>',
                                titleAttr: 'Подробнее',
                                action: function () {
                                    var id = $('#table').DataTable().rows({ selected: true }).data()[0][0];
                                    if (id != undefined)
                                        document.location = window.GetPostUrl(id);
                                }
                            },
                            {
                                //extend: 'delHtml5',
                                text: '<i class="fa fa-times"></i>',
                                titleAttr: 'Удалить',
                                action: function () {
                                    var id = $('#table').DataTable().rows({ selected: true }).data()[0][0];
                                    if (id != undefined)
                                        document.location = '@Url.Action("Delete")' + "/" + id;
                                }
                            }
                        ]
                    });
                }
            });
        });
    </script>
}*@
